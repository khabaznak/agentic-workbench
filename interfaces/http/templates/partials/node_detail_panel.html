<h2>{{ node.title }}</h2>
<p>
  <strong>Type:</strong> {{ node.type }}
  Â·
  <strong>Status:</strong> {{ node.status }}
</p>
{% if node.owner %}
  <p><strong>Owner:</strong> {{ node.owner }}</p>
{% endif %}
{% if node.priority is not none %}
  <p><strong>Priority:</strong> {{ node.priority }}</p>
{% endif %}
{% if node.context_prompt %}
  <h3>Prior Prompt Context</h3>
  <p>{{ node.context_prompt }}</p>
{% endif %}
{% if node.rationale %}
  <h3>Notes / Rationale</h3>
  <p>{{ node.rationale }}</p>
{% endif %}

{% if choices %}
  <h3>Choices</h3>
  <ul>
    {% for choice in choices %}
      <li>
        <strong>{{ choice.label }}.</strong> {{ choice.text }}
        {% if choice.is_chosen %}
          <strong>(Chosen)</strong>
        {% else %}
          <button
            hx-get="/sessions/{{ session_id }}/nodes/{{ node.id }}/replay-prompt?choice_label={{ choice.label }}"
            hx-target="#replay-box"
            hx-swap="innerHTML"
            type="button"
          >
            Generate Replay Prompt
          </button>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
  <div id="replay-box"></div>
{% else %}
  <p>No choices recorded for this node.</p>
{% endif %}
